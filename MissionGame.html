<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏Å‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡∏±‡∏ö‡∏™‡∏°‡∏≠‡∏á: ‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #121212;
    color: #f0f0f0;
    text-align: center;
    padding: 20px;
    line-height: 1.6;
}
button {
    display: block;
    margin: 10px auto;
    padding: 12px 24px;
    font-size: 18px;
    cursor: pointer;
    width: 80%;
    max-width: 400px;
    border: none;
    border-radius: 8px;
    background-color: #007bff;
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
}
button:hover:not(:disabled) {
    background-color: #0056b3;
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
}
button:disabled {
    cursor: not-allowed;
    opacity: 0.6;
    background-color: #6c757d;
}
#gameArea, #introScreen {
    background-color: #1e1e1e;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
    max-width: 900px;
    margin: 20px auto;
}
.hidden {
    display: none;
}
#introText {
    font-size: 1.1em;
    line-height: 1.8;
    background-color: #2a2a2a;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 25px;
    border-left: 5px solid #007bff;
    text-align: left;
}
#volumeControl {
    margin-top: 25px;
    padding: 15px;
    background-color: #2a2a2a;
    border-radius: 8px;
}
#volumeControl label {
    font-size: 1.1em;
    color: #bbb;
    margin-right: 15px;
}
#volumeSlider {
    width: 250px;
    -webkit-appearance: none;
    height: 8px;
    background: #555;
    outline: none;
    border-radius: 4px;
}
#volumeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: #007bff;
    cursor: pointer;
    border-radius: 50%;
    border: 2px solid #fff;
}
#levelHeader, #timer, #status {
    font-size: 1.5em;
    font-weight: bold;
    color: #4CAF50;
    margin-bottom: 20px;
}
#timer {
    color: #FFC107;
}
#status {
    color: #dc3545;
}
#challengeBox {
    background-color: #333;
    padding: 25px;
    border-radius: 10px;
    border: 1px solid #444;
}
#challengeDescription {
    font-size: 1.3em;
    margin-bottom: 20px;
}
#inputField {
    padding: 10px;
    font-size: 20px;
    text-align: center;
    width: 80%;
    max-width: 300px;
    margin-bottom: 15px;
    border-radius: 5px;
    border: 1px solid #555;
    background-color: #444;
    color: #fff;
}
.choice-btn {
    padding: 12px;
    font-size: 1.1em;
    margin: 8px;
    background-color: #444;
    border: 1px solid #666;
    color: white;
}
.choice-btn:hover:not(:disabled) {
    background-color: #555;
}
#resultMessage {
    font-size: 1.2em;
    margin-top: 20px;
    padding: 10px;
    border-radius: 5px;
}
.correct-result {
    color: #28a745;
    background-color: rgba(40, 167, 69, 0.2);
}
.incorrect-result {
    color: #dc3545;
    background-color: rgba(220, 53, 69, 0.2);
}
#nextLevelBtn, #restartBtn {
    margin-top: 25px;
}
</style>
</head>
<body>

<h1>‡πÄ‡∏Å‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡∏±‡∏ö‡∏™‡∏°‡∏≠‡∏á</h1>

<div id="volumeControl">
    <label for="volumeSlider">‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ:</label>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.1">
</div>

<div id="introScreen">
    <div id="introText">
        <p>‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏´‡∏≤‡∏£‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏´‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏à‡∏∞‡∏´‡∏°‡∏î‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß!</p>
        <p>‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏´‡∏ß‡∏û‡∏£‡∏¥‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡∏¥‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏Ç‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡∏ï‡∏π, ‡∏´‡∏≤‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤, ‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</p>
        <p>‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 20 ‡∏î‡πà‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏π‡πâ‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?</p>
    </div>
    <button id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à</button>
    <a href="index.html" style="text-decoration: none;"><button id="homeBtn1">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button></a>
</div>

<div id="gameArea" class="hidden">
    <div id="levelHeader"></div>
    <div id="timer"></div>
    <div id="status"></div>
    <div id="challengeBox">
        <div id="challengeDescription"></div>
        <div id="choices"></div>
    </div>
    <div id="resultMessage"></div>
    <button id="restartBtn" class="hidden">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏´‡∏°‡πà</button>
    <a href="index.html" style="text-decoration: none;"><button id="homeBtn2" class="hidden">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button></a>
</div>

<audio id="bgMusic1" src="Mission1.ogg" loop></audio>
<audio id="successSound" src="correct.ogg"></audio>
<audio id="failSound" src="wrong.ogg"></audio>
<audio id="missionCompleteSound" src="victory.ogg"></audio>
<audio id="gameOverSound" src="failure.ogg"></audio>
<audio id="keyUnlockSound" src="key_unlock.ogg"></audio>
<audio id="buttonPressSound" src="button_press.ogg"></audio>
<audio id="doorOpenSound" src="door_open.ogg"></audio>
<audio id="runningStairsSound" src="running_stairs.ogg"></audio>

<script>
const introScreen = document.getElementById('introScreen');
const gameArea = document.getElementById('gameArea');
const startBtn = document.getElementById('startBtn');
const homeBtn1 = document.getElementById('homeBtn1');
const homeBtn2 = document.getElementById('homeBtn2');
const levelHeader = document.getElementById('levelHeader');
const timerDisplay = document.getElementById('timer');
const statusDisplay = document.getElementById('status');
const challengeDescription = document.getElementById('challengeDescription');
const choicesDiv = document.getElementById('choices');
const resultMessage = document.getElementById('resultMessage');
const restartBtn = document.getElementById('restartBtn');
const volumeSlider = document.getElementById('volumeSlider');
const bgMusic1 = document.getElementById('bgMusic1');
const successSound = document.getElementById('successSound');
const failSound = document.getElementById('failSound');
const missionCompleteSound = document.getElementById('missionCompleteSound');
const gameOverSound = document.getElementById('gameOverSound');
const keyUnlockSound = document.getElementById('keyUnlockSound');
const buttonPressSound = document.getElementById('button_press.ogg');
const doorOpenSound = document.getElementById('door_open.ogg');
const runningStairsSound = document.getElementById('running_stairs.ogg');

let currentLevel = 0;
let timer;
let timeLeft;
const maxLevels = 20;
let extraTime = 0; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
const maxIncorrectAttempts = 3;
let incorrectAttemptsInLevel = 0;

let missionData = [];

// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
if(bgMusic1) bgMusic1.volume = 0.1;
if(successSound) successSound.volume = 1.0;
if(failSound) failSound.volume = 1.0;
if(missionCompleteSound) missionCompleteSound.volume = 1.0;
if(gameOverSound) gameOverSound.volume = 1.0;
if(keyUnlockSound) keyUnlockSound.volume = 1.0;
if(buttonPressSound) buttonPressSound.volume = 1.0;
if(doorOpenSound) doorOpenSound.volume = 1.0;
if(runningStairsSound) runningStairsSound.volume = 1.0;

// ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
if(volumeSlider) {
    volumeSlider.addEventListener('input', (e) => {
        const volume = e.target.value;
        if(bgMusic1) bgMusic1.volume = volume;
    });
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
if(startBtn) {
    startBtn.addEventListener('click', () => {
        // ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏≤‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ UI ‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
        introScreen.classList.add('hidden');
        gameArea.classList.remove('hidden');

        try {
            // ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
            if (bgMusic1) bgMusic1.play();
        } catch (e) {
            console.error("Error playing audio on button click:", e);
        }
        
        missionData = generateAllMissions();
        currentLevel = 0;
        extraTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
        startLevel();
    });
}

if(restartBtn) restartBtn.addEventListener('click', () => location.reload());

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startTimer(duration) {
    clearInterval(timer);
    timeLeft = duration;
    if(timerDisplay) timerDisplay.textContent = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
    timer = setInterval(() => {
        timeLeft--;
        if(timerDisplay) timerDisplay.textContent = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        if (timeLeft <= 0) {
            clearInterval(timer);
            endGame(false, "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß");
        }
    }, 1000);
}

function startLevel() {
    currentLevel++;
    if (currentLevel > maxLevels) {
        endGame(true, `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏£‡∏ö ${maxLevels} ‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! üèÜ`);
        return;
    }
    
    // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î
    if (bgMusic1) {
        bgMusic1.pause();
        bgMusic1.currentTime = 0;
        bgMusic1.play();
    }
    if (currentLevel > 1) {
        if (runningStairsSound) runningStairsSound.play();
    }

    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
    incorrectAttemptsInLevel = 0;
    updateStatus();

    if(levelHeader) levelHeader.textContent = `‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà ${currentLevel}`;
    if(resultMessage) resultMessage.textContent = '';
    if(restartBtn) restartBtn.classList.add('hidden');
    if(homeBtn2) homeBtn2.classList.add('hidden');
    if(choicesDiv) choicesDiv.innerHTML = '';

    const mission = missionData[currentLevel - 1];
    if(challengeDescription) challengeDescription.textContent = mission.description;

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    if(choicesDiv) {
        choicesDiv.classList.remove('hidden');
        const shuffledChoices = shuffleArray(mission.choices);
        shuffledChoices.forEach(choice => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.textContent = choice;
            btn.onclick = () => {
                if(buttonPressSound) buttonPressSound.play();
                checkAnswer(btn.textContent);
            };
            choicesDiv.appendChild(btn);
        });
    }
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∞‡∏™‡∏°‡∏à‡∏≤‡∏Å‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß
    const totalTimeForThisLevel = mission.timeLimit + extraTime;
    extraTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏∞‡∏™‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏ä‡πâ
    startTimer(totalTimeForThisLevel);
}

function updateStatus() {
    if (statusDisplay) {
        statusDisplay.textContent = `‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î: ${incorrectAttemptsInLevel}/${maxIncorrectAttempts}`;
    }
}

function generateAllMissions() {
    const missions = [];
    const timeLimitAllLevels = 60;
    
    const riddles = [
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡∏´‡∏±‡∏Å‡∏¢‡∏¥‡πà‡∏á‡∏¢‡∏≤‡∏ß ‡∏¢‡∏¥‡πà‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏±‡πâ‡∏ô?", "‡∏≠‡∏≤‡∏¢‡∏∏"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏´‡∏±‡∏ß‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏≤‡∏á ‡∏°‡∏µ‡πÅ‡∏ï‡πà‡πÄ‡∏•‡∏Ç‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏û‡∏π‡∏î?", "‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡πâ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏µ ‡∏¢‡∏¥‡πà‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏¢‡∏¥‡πà‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ?", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏¢‡∏¥‡πà‡∏á‡∏´‡πà‡∏≤‡∏á‡∏¢‡∏¥‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏Å‡∏•‡πâ?", "‡πÄ‡∏á‡∏≤"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏°‡∏µ‡∏ï‡∏≤‡πÅ‡∏ï‡πà‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô?", "‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡∏£‡πâ‡∏≠‡∏ô‡∏¢‡∏¥‡πà‡∏á‡πÅ‡∏Ç‡πá‡∏á?", "‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°"],
        ["‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡∏ï‡∏±‡∏î‡∏¢‡∏¥‡πà‡∏á‡∏Ñ‡∏°?", "‡∏Å‡∏£‡∏£‡πÑ‡∏Å‡∏£"]
    ];
    const primes = [41, 43, 47, 53, 59, 61, 67, 71];
    const colors = ['‡πÅ‡∏î‡∏á','‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß','‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô','‡∏°‡πà‡∏ß‡∏á','‡∏™‡πâ‡∏°','‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á'];
    const colorRiddles = {
        '‡πÅ‡∏î‡∏á': '‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å',
        '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß': '‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏ò‡∏ô‡∏ö‡∏±‡∏ï‡∏£ 20 ‡∏ö‡∏≤‡∏ó',
        '‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô': '‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ó‡∏∞‡πÄ‡∏•',
        '‡∏°‡πà‡∏ß‡∏á': '‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏î‡∏≠‡∏Å‡∏≠‡∏±‡∏ç‡∏ä‡∏±‡∏ô',
        '‡∏™‡πâ‡∏°': '‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡∏™‡πâ‡∏°',
        '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á': '‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏î‡∏≠‡∏Å‡∏ó‡∏≤‡∏ô‡∏ï‡∏∞‡∏ß‡∏±‡∏ô'
    };

    // Helper function to create distractors for choices
    function getDistractors(correctAnswer, allPossibleAnswers, count = 4) {
        const distractors = allPossibleAnswers.filter(a => a !== correctAnswer);
        return shuffleArray(distractors).slice(0, count);
    }
    
    // Levels 1-12
    // Level 1: Random sum
    const numbers1 = shuffleArray([2, 3, 4, 5, 8, 9, 10, 11]).slice(0, 5);
    const sum1 = numbers1.reduce((a, b) => a + b, 0);
    const sumChoices = getDistractors(String(sum1), [String(sum1), String(sum1+1), String(sum1-1), String(sum1+10), String(sum1-10)]);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1: "‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ö‡πâ‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏• ‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á ${numbers1.join(', ')} ‡∏à‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô"`,
        answer: String(sum1),
        choices: [String(sum1), ...sumChoices],
        timeLimit: timeLimitAllLevels
    });
    
    // Level 2: Random floor choice
    const floorRiddles = [
        { riddle: `"‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏ß‡πà‡∏≤ "‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏π‡∏Å‡∏Ç‡∏±‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏•‡∏á‡πÑ‡∏õ" ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á`, answer: '‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô' },
        { riddle: `"‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏ß‡πà‡∏≤ "‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏π‡∏Å‡∏Ç‡∏±‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ä‡∏±‡πâ‡∏ô 1 ‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô 5" ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á`, answer: '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3' },
        { riddle: `"‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏ß‡πà‡∏≤ "‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏π‡∏Å‡∏Ç‡∏±‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏î‡∏≤‡∏î‡∏ü‡πâ‡∏≤" ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á`, answer: '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 4' },
        { riddle: `"‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏°‡∏≤‡∏ß‡πà‡∏≤ "‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏π‡∏Å‡∏Ç‡∏±‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô" ‡∏ä‡∏±‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ‡∏°‡∏µ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô, ‡∏ä‡∏±‡πâ‡∏ô 1, 2, 3, 4, ‡πÅ‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏≤‡∏î‡∏ü‡πâ‡∏≤" ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á`, answer: '‡∏ä‡∏±‡πâ‡∏ô‡∏î‡∏≤‡∏î‡∏ü‡πâ‡∏≤' }
    ];
    
    const randomFloorRiddle = floorRiddles[Math.floor(Math.random() * floorRiddles.length)];
    missions.push({
        type: 'choices',
        description: randomFloorRiddle.riddle,
        answer: randomFloorRiddle.answer,
        choices: ['‡∏ä‡∏±‡πâ‡∏ô‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô', '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1', '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2', '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3', '‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 4', '‡∏ä‡∏±‡πâ‡∏ô‡∏î‡∏≤‡∏î‡∏ü‡πâ‡∏≤'].slice(0, 5),
        timeLimit: timeLimitAllLevels
    });

    // Level 3: Prime numbers
    const randomPrime = primes[Math.floor(Math.random() * primes.length)];
    const nextPrime = primes[primes.indexOf(randomPrime) + 1];
    const primeChoices = getDistractors(String(nextPrime), [String(nextPrime), String(randomPrime+1), String(randomPrime+2), String(nextPrime+1), String(nextPrime-1)]);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3: "‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏•‡∏¥‡∏ü‡∏ï‡πå‡∏Ñ‡∏∑‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏≤‡∏Å ${randomPrime}"`,
        answer: String(nextPrime),
        choices: [String(nextPrime), ...primeChoices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 4: Riddle
    const randomRiddle1 = riddles[Math.floor(Math.random() * riddles.length)];
    const riddle1Choices = getDistractors(randomRiddle1[1], riddles.map(r => r[1]));
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4: "‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤" ${randomRiddle1[0]}`,
        answer: randomRiddle1[1],
        choices: [randomRiddle1[1], ...riddle1Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 5: Number clue
    const floorIndex = Math.floor(Math.random() * 5) + 1;
    const floorsInHouse = ['‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1', '‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2', '‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3', '‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 4', '‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 5'];
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 5: "‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏õ‡∏¥‡∏î‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏†‡∏≤‡∏û‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏£‡∏π‡∏õ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏Ç ${floorIndex} ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤"`,
        answer: `‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà ${floorIndex}`,
        choices: floorsInHouse.slice(0,5),
        timeLimit: timeLimitAllLevels
    });

    // Level 6: Math equation 1
    const numA1 = Math.floor(Math.random() * 10) + 5;
    const numB1 = Math.floor(Math.random() * 10) + 5;
    const result1 = numA1 * numB1;
    const math1Choices = getDistractors(String(result1), [String(result1), String(result1+1), String(result1-1), String(result1+10), String(result1-10)]);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 6: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≥‡πÄ‡∏ô‡∏¥‡∏î‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏Ñ‡∏π‡∏ì‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ${numA1} * ${numB1} = ?"`,
        answer: String(result1),
        choices: [String(result1), ...math1Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 7: Riddle 2
    const randomRiddle2 = riddles[Math.floor(Math.random() * riddles.length)];
    const riddle2Choices = getDistractors(randomRiddle2[1], riddles.map(r => r[1]));
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 7: "‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤" ${randomRiddle2[0]}`,
        answer: randomRiddle2[1],
        choices: [randomRiddle2[1], ...riddle2Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 8: Alphabet code
    const alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
    const randomCode = shuffleArray(alphabet).slice(0, 4).join('').toUpperCase();
    const codeChoices = getDistractors(randomCode, [randomCode, 'ABCD', 'WXYZ', 'JUMP', 'CODE']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 8: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠ ${randomCode}"`,
        answer: randomCode,
        choices: [randomCode, ...codeChoices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 9: Riddle 3
    const randomRiddle3 = riddles[Math.floor(Math.random() * riddles.length)];
    const riddle3Choices = getDistractors(randomRiddle3[1], riddles.map(r => r[1]));
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 9: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ñ‡∏≠‡∏î‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤" ${randomRiddle3[0]}`,
        answer: randomRiddle3[1],
        choices: [randomRiddle3[1], ...riddle3Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 10: Color clue
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 10: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏Å‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏ö‡πâ ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏Ñ‡∏∑‡∏≠ '${colorRiddles[randomColor]}'"`,
        answer: randomColor,
        choices: colors.slice(0,5),
        timeLimit: timeLimitAllLevels
    });
    
    // Level 11: Math equation 2
    const numC1 = Math.floor(Math.random() * 20) + 1;
    const numD1 = Math.floor(Math.random() * 20) + 1;
    const result2 = numC1 + numD1;
    const math2Choices = getDistractors(String(result2), [String(result2), String(result2+1), String(result2-1), String(result2+5), String(result2-5)]);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 11: "‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ${numC1} + ${numD1} = ?"`,
        answer: String(result2),
        choices: [String(result2), ...math2Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });
    
    // Level 12: Final math equation
    const numA2 = Math.floor(Math.random() * 10) + 1;
    const numB2 = Math.floor(Math.random() * 10) + 1;
    const numC2 = Math.floor(Math.random() * 10) + 1;
    const result3 = numA2 * numB2 + numC2;
    const math3Choices = getDistractors(String(result3), [String(result3), String(result3+1), String(result3-1), String(result3+5), String(result3-5)]);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏´‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (${numA2} * ${numB2}) + ${numC2} = ?"`,
        answer: String(result3),
        choices: [String(result3), ...math3Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // --- NEW ESCAPE LEVELS (13-20) - NUMBER PUZZLES ---
    // Level 13: Simple addition
    const result13 = 12;
    const puzzle13Choices = getDistractors(String(result13), [String(result13), '10', '11', '13', '14']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 13: "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏´‡∏ô‡∏µ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡πâ‡∏≤‡∏á ‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏¥‡πâ‡∏ß‡∏°‡∏∑‡∏≠‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' ‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå' "`,
        answer: String(result13),
        choices: [String(result13), ...puzzle13Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 14: Simple division
    const result14 = 6;
    const puzzle14Choices = getDistractors(String(result14), [String(result14), '4', '5', '7', '8']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 14: "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏ó‡∏≤‡∏á‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ß‡∏±‡∏ô' ‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡πâ‡∏≠‡∏ö‡∏ô‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå' "`,
        answer: String(result14),
        choices: [String(result14), ...puzzle14Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });
    
    // Level 15: Simple multiplication
    const result15 = 9;
    const puzzle15Choices = getDistractors(String(result15), [String(result15), '8', '10', '12', '15']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 15: "‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏¥‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏†‡∏±‡∏¢ ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°' ‡∏Ñ‡∏π‡∏ì‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏µ‡πÉ‡∏ô‡∏ò‡∏á‡∏ä‡∏≤‡∏ï‡∏¥‡πÑ‡∏ó‡∏¢' "`,
        answer: String(result15),
        choices: [String(result15), ...puzzle15Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });
    
    // Level 16: Simple subtraction
    const result16 = 1;
    const puzzle16Choices = getDistractors(String(result16), [String(result16), '0', '2', '3', '4']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 16: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ï‡∏π ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏õ‡∏µ' ‡∏•‡∏ö‡∏î‡πâ‡∏ß‡∏¢ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•' "`,
        answer: String(result16),
        choices: [String(result16), ...puzzle16Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 17: Addition puzzle
    const result17 = 10;
    const puzzle17Choices = getDistractors(String(result17), [String(result17), '9', '11', '12', '13']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 17: "‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏à‡∏≠‡πÅ‡∏ú‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå' ‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡πâ‡∏≠‡∏ö‡∏ô‡∏£‡∏ñ‡∏™‡∏≤‡∏°‡∏•‡πâ‡∏≠' "`,
        answer: String(result17),
        choices: [String(result17), ...puzzle17Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });
    
    // Level 18: Multiplication puzzle
    const result18 = 10;
    const puzzle18Choices = getDistractors(String(result18), [String(result18), '8', '12', '15', '20']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 18: "‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏¥‡πâ‡∏ß‡πÄ‡∏ó‡πâ‡∏≤‡∏ö‡∏ô‡πÄ‡∏ó‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' ‡∏Ñ‡∏π‡∏ì‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏π‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏ô' "`,
        answer: String(result18),
        choices: [String(result18), ...puzzle18Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 19: Addition puzzle 2
    const result19 = 20;
    const puzzle19Choices = getDistractors(String(result19), [String(result19), '18', '19', '21', '22']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 19: "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏ñ‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™ ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏õ‡∏µ' ‡∏ö‡∏ß‡∏Å‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞' "`,
        answer: String(result19),
        choices: [String(result19), ...puzzle19Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });

    // Level 20: Final multiplication puzzle
    const result20 = 21;
    const puzzle20Choices = getDistractors(String(result20), [String(result20), '18', '20', '24', '28']);
    missions.push({
        type: 'choices',
        description: `‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 20: "‡∏Ñ‡∏∏‡∏ì‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡∏£‡∏ñ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏£‡∏±‡πâ‡∏ß ‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏∑‡∏≠ '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå' ‡∏Ñ‡∏π‡∏ì‡∏Å‡∏±‡∏ö '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏µ‡πÉ‡∏ô‡πÑ‡∏ü‡∏à‡∏£‡∏≤‡∏à‡∏£' "`,
        answer: String(result20),
        choices: [String(result20), ...puzzle20Choices.slice(0, 4)],
        timeLimit: timeLimitAllLevels
    });
    
    return missions;
}

function checkAnswer(userAnswer) {
    const mission = missionData[currentLevel - 1];
    let isCorrect = userAnswer.toLowerCase().trim() === mission.answer.toLowerCase().trim();
    
    const choiceButtons = document.querySelectorAll('#choices .choice-btn');
    choiceButtons.forEach(btn => btn.disabled = true);

    if (isCorrect) {
        clearInterval(timer);
        extraTime = timeLeft;
        if(resultMessage) {
            resultMessage.textContent = `‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° ${extraTime} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ!`;
            resultMessage.className = 'correct-result';
        }
        if(keyUnlockSound) keyUnlockSound.play();
        setTimeout(() => {
            if(doorOpenSound) doorOpenSound.play();
            setTimeout(startLevel, 1500);
        }, 800);
    } else {
        incorrectAttemptsInLevel++;
        updateStatus();
        if(resultMessage) {
            resultMessage.textContent = '‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
            resultMessage.className = 'incorrect-result';
        }
        if(failSound) failSound.play();
        
        if (incorrectAttemptsInLevel >= maxIncorrectAttempts) {
            setTimeout(() => endGame(false, `‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡∏Ñ‡∏£‡∏ö ${maxIncorrectAttempts} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á! ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß`), 1000);
        } else {
            choiceButtons.forEach(btn => btn.disabled = false); // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà
        }
    }
}

function endGame(isWin, message) {
    if(bgMusic1) bgMusic1.pause();

    clearInterval(timer);
    if(levelHeader) levelHeader.textContent = '';
    if(timerDisplay) timerDisplay.textContent = '';
    if (statusDisplay) statusDisplay.textContent = '';
    if(challengeDescription) challengeDescription.textContent = message;
    if(choicesDiv) choicesDiv.innerHTML = '';
    if(resultMessage) resultMessage.textContent = '';
    
    if (isWin) {
        if(missionCompleteSound) missionCompleteSound.play();
    } else {
        if(gameOverSound) gameOverSound.play();
    }
    
    if(restartBtn) restartBtn.classList.remove('hidden');
    if(homeBtn2) homeBtn2.classList.remove('hidden');
}
</script>

</body>
</html>